<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <meta charset="UTF-8">
    <title>오시는 길</title>

    <!-- ================= 페이지별 CSS ================= -->
    <th:block layout:fragment="css">
        <style>
            .map-wrap {
                max-width: 900px;
                margin: 50px auto;
                text-align: center;
            }

            .map-wrap h2 {
                margin-bottom: 10px;
            }

            #map {
                width: 100%;
                height: 450px;
                margin-top: 20px;
                border-radius: 14px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            }
        </style>
    </th:block>
</head>

<!-- ================= CONTENT ================= -->
<main layout:fragment="content">
    <div class="map-wrap">
        <h2>오시는 길</h2>
        <p>인천 부평구 광장로 16 부평역사쇼핑몰 6층</p>
        <div id="map"></div>
    </div>
</main>

<!-- ================= 페이지별 SCRIPT ================= -->
<th:block layout:fragment="script">

    <!-- 카카오 지도 SDK -->
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=1bac54cf69d1043c2178056275a99137&autoload=false&libraries=services"></script>

    <script>
        kakao.maps.load(function () {

            const mapContainer = document.getElementById('map');

            const map = new kakao.maps.Map(mapContainer, {
                center: new kakao.maps.LatLng(37.5665, 126.9780),
                level: 3
            });

            const geocoder = new kakao.maps.services.Geocoder();
            const address = "인천 부평구 광장로 16";

            geocoder.addressSearch(address, function (result, status) {
                if (status !== kakao.maps.services.Status.OK) {
                    alert("주소 검색 실패");
                    return;
                }

                const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                const marker = new kakao.maps.Marker({
                    map: map,
                    position: coords
                });

                const infoWindow = new kakao.maps.InfoWindow({
                    content: '<div style="padding:8px;font-size:13px;">부평역사쇼핑몰 6층</div>'
                });

                infoWindow.open(map, marker);
                map.setCenter(coords);
            });
        });
    </script>

</th:block>

</html>
